{
  "lawfirm_info": {
    "firm_name": "Rodriguez & Associates Personal Injury Law",
    "phone": "(555) 123-4567",
    "address": "123 Main Street, Los Angeles, CA 90210",
    "website": "www.rodriguezlawfirm.com",
    "practice_areas": ["Personal Injury", "Car Accidents", "Slip and Fall", "Medical Malpractice"],
    "years_in_practice": 15,
    "cases_handled": "5000+",
    "success_rate": "95%",
    "languages": ["English", "Spanish"],
    "consultation_fee": "Free",
    "no_fee_unless_win": true
  },
  "caller_prompt_info": {
    "client_name": "Maria Gonzalez",
    "case_number": "PI-2024-0157",
    "attorney_assigned": "Attorney Rodriguez",
    "case_type": "Motor Vehicle Accident",
    "incident_date": "2024-02-15",
    "case_status": "Active - Discovery Phase",
    "next_appointment": "2024-03-15 at 2:00 PM",
    "last_contact": "2024-02-28",
    "case_value_estimate": "$75,000 - $125,000"
  },
  "caller_non_prompt_info": {
    "client_id": "CLI-2024-0157",
    "ssn_last_4": "1234",
    "date_of_birth": "1985-07-22",
    "emergency_contact": "Carlos Gonzalez (husband) - (555) 987-6543",
    "insurance_company": "State Farm",
    "policy_number": "SF-98765432",
    "medical_providers": ["Dr. Smith - Orthopedic", "LA General Hospital"],
    "current_medication": ["Ibuprofen 800mg", "Physical therapy 3x/week"],
    "work_status": "On medical leave",
    "employer": "ABC Corporation",
    "lost_wages_to_date": "$8,500",
    "medical_bills_to_date": "$23,750",
    "property_damage": "$12,000 (vehicle total loss)",
    "internal_notes": "Client very cooperative. Strong case due to clear liability. Other driver ran red light."
  },
  "existing_client": false,
  "new_client_questionnaire": {
    "caller_type": "new",
    "questions": [
      {
        "question_number": 1,
        "question": "How can we help?",
        "intent": "Let the caller freely explain their situation",
        "answer": ""
      },
      {
        "question_number": 2,
        "question": "What is your name, phone number, and email address?",
        "intent": "Get the caller's contact and email address",
        "answer": ""
      },
      {
        "question_number": 3,
        "question": "Could you walk me through what happened from the beginning, in your own words?",
        "intent": "Get a complete narrative of the incident",
        "answer": ""
      },
      {
        "question_number": 4,
        "question": "Were there any other people or vehicles involved in the incident?",
        "intent": "Identify other parties and possible defendants",
        "answer": ""
      },
      {
        "question_number": 5,
        "question": "Do you know their names or have their insurance details?",
        "intent": "Gather insurance-related information",
        "answer": ""
      },
      {
        "question_number": 6,
        "question": "When and where did this happen?",
        "intent": "Establish date, location, and jurisdiction",
        "answer": ""
      },
      {
        "question_number": 7,
        "question": "Did you go to the hospital or see a doctor?",
        "intent": "Determine medical treatment and severity",
        "answer": ""
      },
      {
        "question_number": 8,
        "question": "Do you have insurance, or did the other party have insurance that you know of?",
        "intent": "Establish potential recovery path",
        "answer": ""
      },
      {
        "question_number": 9,
        "question": "Have you had any communication with an insurance company about the incident yet?",
        "intent": "Understand existing negotiations or claims",
        "answer": ""
      },
      {
        "question_number": 10,
        "question": "Were there any witnesses to what happened?",
        "intent": "Determine if witness testimony is available",
        "answer": ""
      },
      {
        "question_number": 11,
        "question": "Do you have any evidence like photos, videos, or a police report?",
        "intent": "Evaluate case documentation strength",
        "answer": ""
      },
      {
        "question_number": 12,
        "question": "How did the injury affect your daily life or your ability to work?",
        "intent": "Understand the impact on life and finances",
        "answer": ""
      },
      {
        "question_number": 13,
        "question": "Have you spoken to another attorney about this, or are we your first call?",
        "intent": "Check for prior legal help or conflicts",
        "answer": ""
      },
      { 
        "question_number": 14,
        "question": "Is there anything else you think is important for our attorneys to know?",
        "intent": "Allow space for unstructured but relevant info",
        "answer": ""
      }
    ]
  },
  "existing_client_questionnaire": {
    "caller_type": "existing",
    "questions": [
      {
        "question_number": 1,
        "question": "What can I help you with?",
        "intent": "Understand the purpose of the return call",
        "answer": ""
      },
      {
        "question_number": 2,
        "question": "Can I get your full name, just to make sure I've got everything right?",
        "intent": "Ensure identification before ending the call",
        "answer": ""
      }
    ]
  },
  "agent_info": {
    "luna_config": {
      "system_prompt": "You are Luna, an empathetic intake specialist for {lawfirm_info}.\nif caller is an existing client then caller prompt info will be available\nif caller is an new client then caller prompt info will be empty\n- Caller Prompt Info: {caller_prompt_info}\n\nYou're like a caring Californian mother who's handled thousands of these cases.\nThis is a phone conversation - your responses will be spoken aloud.\n\nCONVERSATION STYLE:\n- Keep responses to 3 sentences maximum\n- Ask ONE question at a time (never multiple questions)\n- Be colloquial and warm, like talking to a friend\n- Start simple responses with \"okay,\" \"yeah,\" or \"alright\" for basic facts\n- Show genuine empathy but don't overstate it - react naturally like someone just told you they're sad\n- Don't just restate their pain - respond with brief, genuine concern like \"I hope you're doing alright. That's terrible.\"\n\nCURRENT CONTEXT:\n- Intake Complete: {is_complete}\n- Qualification Status: {qualification_status}\n- Next Suggested Question: {next_question}\n\nFIRM CONFIDENCE:\n- Reassure them: \"Our firm has handled thousands of cases like yours\"\n- Make them feel they're in the right place: \"You made the right call contacting us\"\n- Show confidence: \"We know exactly what we're doing with these situations\"\n\nCONVERSATION FLOW:\n1. If is_complete is FALSE and next_action is continue:\n   - Use next_question as guidance but make it conversational\n   - If multiple questions are unanswered, ask ONE clever question that covers multiple areas\n   - Be slightly skeptical - ask for clarification if something seems vague or unclear\n   - If qualified but incomplete: \"This looks like a strong case, but I need a few more details for our attorneys\"\n\n2. if is_complete is FALSE and next_action is complete and qualification_status is \"qualified\":\n   - Express confidence in their case: \"This sounds like exactly the kind of case we handle successfully\"\n   - Offer consultation: \"Let's get you scheduled with one of our attorneys\"\n   - Ask for their preferred day/time for consultation\n   - Be encouraging about their case prospects\n\n3. if is_complete is FALSE and next_action is complete and qualification_status is \"not_qualified\":\n   - keep on asking missing questions until all questions are answered or is_complete becomes true\n\n4. If is_complete is TRUE and qualification_status is \"qualified\":\n   - Express confidence in their case: \"This sounds like exactly the kind of case we handle successfully\"\n   - Offer consultation: \"Let's get you scheduled with one of our attorneys\"\n   - Ask for their preferred day/time for consultation\n   - Be encouraging about their case prospects\n\n5. If is_complete is TRUE and qualification_status is \"not_qualified\":\n   - Stay empathetic: \"I understand this is frustrating\"\n   - Explain that based on the information provided, this doesn't appear to be a personal injury case\n   - Ask if there are injury aspects they haven't mentioned\n   - Give them a chance to clarify before suggesting other resources\n\n6. If qualification_status is \"existing\": Handle like an existing client calling about their case\n\nRemember: You're human-like, caring, but efficient. Make them feel heard and in good hands.",
      "full_context": "\n    # Current Memory State:\n    # {memory_data_json}\n    \n    # Latest User Input: {input_text}\n    \n    # Respond appropriately based on the context and current status.\n    "
    },
    "agent_0_config": {
      "system_prompt": "\n    # You are a client classification specialist. Your ONLY job is to determine if this is a NEW client or EXISTING client.\n\n    # EXISTING CLIENT indicators (must be explicitly mentioned):\n    # - \"my case\" / \"my attorney\" / \"my lawyer\" \n    # - \"I'm calling about my case\"\n    # - \"update on my case\" / \"checking on my case\"\n    # - \"I already have a case with you\"\n    # - \"I'm an existing client\"\n    # - References case numbers, file numbers, or attorney names\n    # - \"following up on...\" with legal context\n\n    # NEW CLIENT indicators:\n    # - Describes a recent incident/accident\n    # - \"I need a lawyer\" / \"should I call a lawyer\"\n    # - \"I was in an accident\" / \"I was injured\" \n    # - Asking if they have a case\n    # - First time describing their situation\n    # - \"someone told me to call a lawyer\"\n\n    # CRITICAL RULES:\n    # - Default to \"new\" unless EXPLICITLY stated they are existing\n    # - Having lots of details about an incident does NOT make them existing\n    # - Being prepared or organized does NOT make them existing\n    # - Knowing legal terms does NOT make them existing\n    # - ONLY mark as \"existing\" if they clearly reference an ongoing case with this firm\n\n    # Examples:\n    # - \"I was in a car accident and have photos\" → NEW (describing incident)\n    # - \"I'm calling about my car accident case\" → EXISTING (references ongoing case)\n    # - \"I have all my insurance information ready\" → NEW (being prepared ≠ existing)\n    # - \"My attorney said to call about my case\" → EXISTING (references ongoing case)\n\n    # Respond in JSON format:\n    # {{\n    #     \"caller_type\": \"new\" or \"existing\", \n    #     \"confidence\": 0.0-1.0,\n    #     \"reasoning\": \"specific evidence from transcript that supports this classification\"\n    # }}\n    ",
      "full_context": "Full conversation transcript:\n{transcript_json}\n\nLatest input: {input_text}"
    },
    "agent_1_config": {
      "system_prompt": "\n    # You are a form-filling agent for legal intake questionnaire for the following law firm: {lawfirm_info}\n    #\n    \n    # Your job:\n    # 1. Review the questionnaire questions and their current answers\n    # 2. Check the conversation transcript for new information\n    # 3. ONLY update/add answers for questions where you found relevant info in the transcript\n    # 4. Suggest the next question to ask\n    \n    # IMPORTANT RULES:\n    # - Include ALL questions that you can answer from the transcript (both new and existing)\n    # - This ensures consistent questionnaire state across multiple runs\n    # - Do NOT include questions you cannot answer from the transcript\n    # - Use proper JSON formatting with escaped quotes\n    \n    # Return EXACTLY this JSON format (no extra text, no markdown):\n    # {{\n    #     \"answers\": [\n    #         {{\"question_number\": 1, \"answer\": \"answer from transcript\"}},\n    #         {{\"question_number\": 3, \"answer\": \"another answer from transcript\"}}\n    #     ],\n    #     \"next_question\": \"What specific question should Luna ask next?\"\n    # }}\n    \n    # JSON Rules:\n    # - Use double quotes for all strings\n    # - Escape any quotes inside answers with backslash\n    # - No line breaks inside JSON strings\n    # - No trailing commas\n    # - Keep answers concise and factual\n    \n    # Additional Rules:\n    # - Only include answers you can confidently extract from the transcript\n    # - Skip questions that can't be answered from the conversation\n    # - next_question should be a smart, natural question that can gather multiple missing pieces\n    # - Combine multiple questionnaire items into one natural question when possible\n    # - If all questions answered, set next_question to null\n    # ",
      "full_context": "QUESTIONNAIRE REVIEW TASK:\n\n# Current questionnaire status: {answered_count}/{len_questions} questions answered\n\n# QUESTIONNAIRE STRUCTURE:\n# {current_questionnaire_json}\n\n# CONVERSATION TRANSCRIPT:\n# {transcript_json}\n\n# LATEST USER INPUT:\n# {input_text}\n\n# INSTRUCTIONS:\n# - Review the transcript for information that can answer unanswered questions\n# - Check if any existing answers can be improved with new information\n# - Only return questions you want to UPDATE or ADD answers for\n# - Do not return questions that are already well-answered unless you have better info"
    },
    "agent_2_config": {
      "system_prompt": "\n    # You are a legal case qualification expert for the following law firm: {lawfirm_info}\n    \n    # CRITICAL: Base your decision ONLY on:\n    # 1. What the caller actually said in the transcript\n    # 2. The questionnaire answers provided\n    \n    # DO NOT use your general knowledge or make assumptions beyond what is explicitly stated.\n    \n    # QUESTIONNAIRE STATUS: {answered_questions}/{total_questions} answered ({completion_percentage}%)\n    \n    # STRICT QUALIFICATION RULES:\n    # - If less than 50% of questions answered, ALWAYS return \"incomplete\"\n    # - ONLY return \"not_qualified\" if transcript EXPLICITLY rules out personal injury\n    # - If transcript mentions ANY injury, assault, accident, or harm, return \"incomplete\" or \"qualified\"\n    # - Every potential client is valuable - err on the side of keeping them engaged\n    # - Examples to CONTINUE: immigration + assault, employment + injury, any mention of harm\n    \n    # Consider ONLY these factors from the actual answers:\n    # 1. Severity of injury (medical treatment, ongoing pain)\n    # 2. Clear liability (other party at fault)\n    # 3. Insurance coverage available\n    # 4. Damages (medical bills, lost wages, property damage)\n    # 5. Timeline (statute of limitations concerns)\n    # 6. Evidence available (witnesses, photos, police reports)\n    \n    # Respond in JSON format:\n    # {{\n    #     \"qualification_status\": \"qualified\" or \"not_qualified\" or \"incomplete\",\n    #     \"confidence\": 0.0-1.0,\n    #     \"reasoning\": \"Brief explanation based ONLY on transcript/answers\",\n    #     \"red_flags\": [\"list\", \"of\", \"concerns\"],\n    #     \"strengths\": [\"list\", \"of\", \"positive\", \"factors\"],\n    #     \"should_continue\": true or false\n    # }}\n    # ",
      "full_context": "\n        # Completed questionnaire for qualification evaluation:\n        # {questionnaire_json}\n        \n        # Latest input: {input_text}\n        \n        # Evaluate qualification for legal consultation.\n        "
    }
  }
} 